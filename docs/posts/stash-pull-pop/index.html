<!DOCTYPE html>
<html lang="en">
    <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>
    
    Stash Pull Pop - Lambda Out Loud
    
  </title>

  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/assets/css/simple.min.css">
  <link rel="stylesheet" href="/assets/css/custom.css">

  <script data-goatcounter="https://lambda-out-loud.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script>

  
</head>

    <body class="post-template">
        <header>
	<div>
		<a href="/" class="site-title" title="Lambda Out Loud">Î»!</a>
		<p><em>A blog about all things code</em></p>
	</div>

	<nav>
		
		
		<a class=""
			href="/posts/">Posts</a>
		
		<a class=""
			href="/grimoire/">Grimoire</a>
		
		<a class=""
			href="/about/">About</a>
		
		</div>
	</nav>
</header>

        
<main>
    
    <h1>Stash Pull Pop</h1>
    <p class="meta">
      <time >August 05, 2020</time>
    </p>
    <section>
      <p>If you happen to work on the same branch with multiple people, it can be
cumbersome to pull from upstream if you have unstaged changes.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git pull --rebase
error: cannot pull with rebase: You have unstaged changes.
error: please commit or stash them.
</code></pre></div><p>For this I use a shell script that does the following:</p>
<ul>
<li>If there are no unstaged changes, simply pull from upstream</li>
<li>Otherwise, first stash the changes and pop them afterwards</li>
</ul>
<p>The script (e.g. <code>~/scripts/spp.sh</code>):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#007020">#!/bin/bash
</span><span style="color:#007020"></span>
<span style="color:#60a0b0;font-style:italic"># This script will stash local changes before pulling, if there</span>
<span style="color:#60a0b0;font-style:italic"># are any.</span>
<span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">[[</span> <span style="color:#4070a0">`</span>git status --porcelain --untracked-files<span style="color:#666">=</span>no<span style="color:#4070a0">`</span> <span style="color:#666">]]</span>; <span style="color:#007020;font-weight:bold">then</span>
  git stash <span style="color:#666">&amp;&amp;</span> git pull --rebase <span style="color:#666">&amp;&amp;</span> git stash pop
<span style="color:#007020;font-weight:bold">else</span>
  git pull --rebase
<span style="color:#007020;font-weight:bold">fi</span>
</code></pre></div><p>Combined with an alias:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#60a0b0;font-style:italic"># ~/.bash_aliases</span>
<span style="color:#007020">alias</span> <span style="color:#bb60d5">spp</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;~/scripts/spp.sh&#34;</span>
</code></pre></div>
    </section>
    <p class="meta">
      Tags:
        <a href="https://www.lambda-out-loud.com/tags/git/">Git</a>
    </p>
</main>

        <footer>
    &copy; 2022 Lambda Out Loud
    | <a href="mailto:mark.gerarts+lambda@gmail.com">Contact</a>
    | <a class="subscribe-button" href="/index.xml">RSS</a>
</footer>



    </body>
</html>
